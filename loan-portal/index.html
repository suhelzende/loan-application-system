<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Loan Application</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="processor/loan-processor.js"></script>
  </head>
  <body>
    <div class="container">
      <h1>Loan Application</h1>
      <div>
        <ul class="nav nav-tabs">
          <li id="hometab" class="active"><a data-toggle="tab" href="#home">Home</a></li>
          <li id="businesstab" ><a data-toggle="tab" href="#business">Business Details</a></li>
          <li id="reviewtab" ><a data-toggle="tab" href="#review">Review</a></li>
        </ul>
        <div class="tab-content container">
          <div id="home" class="tab-pane fade in active">
               <form id="start-application">
                <div class="form-group">
                  <label for="name">Name:</label>
                  <input type="name" class="form-control" id="name" />
                </div>
                <div class="form-group">
                  <label for="email">Email:</label>
                  <input type="email" class="form-control" id="email" />
                </div>
                <div class="text-right">
                  <button type="submit" class="btn btn-default">
                    Start Application
                  </button>
                </div>
              </form>
            </div>
            <!-- business details -->
            <div id="business" class="tab-pane fade">
              <form id="start-application">
                <div class="form-group">
                  <label for="regId">Business Registration ID:</label>
                  <input type="regId" class="form-control" id="regId" />
                </div>
                <div class="form-group">
                  <label for="businessName">Business Name:</label>
                  <input type="businessName" class="form-control" id="businessName" />
                </div>
                <div class="form-group">
                  <label for="regId">Established Year:</label>
                  <input
                    type="text"
                    class="form-control"
                    name="datepicker"
                    id="datepicker"
                  />
                </div>
                <div class="text-left">
                  <select class="form-select form-control" aria-label="Default select example" id="providers"> 
                    <option value="Xero">Xero</option><option value="MYOB">MYOB</option>
                  </select>
                </div>
                <div class="text-right">
                  <button type="submit" class="btn btn-default">
                    Request Balance Sheet
                  </button>
                </div>
              </form>
            </div>
            <div id="review" class="tab-pane fade">
              <h3>Review</h3>
              <p>Some content in menu 2.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    $.ajax({
      type: "GET",
      url: "http://localhost:8090/accounting/providers",
      contentType: "application/json",
      crossDomain: true,
      timeout: 1500,
      success: function (provider) {
        console.log(JSON.stringify(provider)); 
        providerOptions   = provider.map((p) => 
          `<option value="${p.ID}">${p.Name}</option>`
        ).join("");
        document.getElementById("providers").innerHTML =  `<option value="0">Select Accounting Provider</option>` + providerOptions;
      },
      dataType: "json",
      error: function () {
        alert("error");
      },
    });
  </script>
</html>
